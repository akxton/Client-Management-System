{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>Client List</title>
  <link rel="stylesheet" href="{% static 'clients/style.css' %}">

</head>
<body>
    <div class="nav">
  {% if user.is_authenticated %}
    <span>Welcome, {{ user.username }}!</span>
    <!-- Logout requires POST form for Django 5+ -->
    <form id="logout-form" action="{% url 'logout' %}" method="post" style="display: inline">
      {% csrf_token %}
      <button type="submit" style="background:none; border:none; padding:0; color:#007bff; cursor:pointer;">Logout</button>
    </form>
  {% else %}
    <a href="{% url 'login' %}?next={{ request.path }}">Login</a> |
    <a href="{% url 'register' %}">Register</a>
  {% endif %}
</div>

  <h1>Clients</h1>
  <form method="get" action="{% url 'client_search' %}" style="margin-bottom: 20px;">
  <label for="client_id">Search by Client ID:</label>
  <input type="text" name="client_id" id="client_id" required style="width: 120px;">
  <button type="submit">Search</button>
</form>

  <a href="{% url 'client_create' %}">Add New Client</a>
  <table border="1">
    <thead>
      <tr>
        <th>ID</th><th>Name</th><th>Company</th><th>Project</th><th>Deadline</th><th>Pay</th><th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for client in clients %}
      <tr>
        <td>{{ client.client_id }}</td>
        <td>{{ client.name }}</td>
        <td>{{ client.company_name }}</td>
        <td>{{ client.project_name }}</td>
        <td>{{ client.project_deadline }}</td>
        <td>{{ client.pay_amount }}</td>
        <td>
          <a href="{% url 'client_update' client.pk %}">Edit</a> |
          <a href="{% url 'client_delete' client.pk %}">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="7">No clients available.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
